import Wrapper from "./container/wrapper/Wrapper";
import useDarkMode from "./hooks/Them";
import { AuthContext } from "./context/Auth";
import { useContext } from "react";
import Login from "./components/auth/Login";
const App = () => {
  const [theme, toggleTheme] = useDarkMode();
  const authContext = useContext(AuthContext);
  function getEmailUsername(email) {
    const emailParts = email.split("@");
    if (emailParts.length >= 2) {
      return emailParts[0];
    }
    return email;
  }
  let content;
  if (!authContext.isAuth) {
    content = (
      <>
        {authContext.user ? (
          <>
            <Login />
          </>
        ) : (
          <>
            <Login /> 
          </>
        )}
      </>
    );
  } else {
    content = (
      <>
        <div className="">
          <div
            className=""
            style={{
              background: theme === "dark" ? "#F7F7F7" : "#0B0D0C",
              color: theme === "dark" ? "#EA526F" : "#EA526F",
              transition: ".2s all",
            }}
          >
            <Wrapper theme={theme} />
          </div>
          <div className="">
            {authContext.user && (
              <>
                <p style={{ color: "black" }}>
                  {getEmailUsername(authContext.user.email)}
                </p>
                <button
                  type="button"
                  className=""
                  style={{
                    backgroundColor: theme === "dark" ? "#6B9080" : "#6B9080",
                    color: theme === "dark" ? "#fff" : "#fff",
                  }}
                  onClick={toggleTheme}
                >
                  {theme === "dark" ? <p>تاریک</p> : <p>روشن</p>}
                  <span className="">
                    {theme === "dark" ? (
                      <svg
                        width="23"
                        height="24"
                        viewBox="0 0 23 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M14.5341 0.904695C13.5157 0.583862 12.6453 1.69685 13.1851 2.61852C14.0379 4.07218 14.4976 5.71253 14.4976 7.35753C14.4976 12.5119 10.3189 16.6908 5.16424 16.6908C4.19369 16.6908 3.21206 16.5333 2.32049 16.2533C1.30211 15.9325 0.395144 17.0455 0.935077 17.9672C3.00883 21.5045 6.79898 23.6908 10.9976 23.6908C17.4408 23.6908 22.6642 18.4677 22.6642 12.0242C22.6642 6.88969 19.3503 2.41903 14.5341 0.904695ZM16.3934 4.40469C18.8015 6.10685 20.3309 8.91269 20.3309 12.0242C20.3309 17.1785 16.1523 21.3575 10.9976 21.3575C8.63146 21.3575 6.46869 20.4475 4.79966 18.9518C4.92414 18.9553 5.04023 19.0242 5.16424 19.0242C11.6076 19.0242 16.8309 13.801 16.8309 7.35753C16.8309 6.35769 16.6536 5.36836 16.3934 4.40469Z"
                          fill="white"
                        />
                      </svg>
                    ) : (
                      <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M12.0165 0.278687C11.3725 0.278687 10.8499 0.801354 10.8499 1.44535V3.77869C10.8499 4.42269 11.3725 4.94536 12.0165 4.94536C12.6605 4.94536 13.1832 4.42269 13.1832 3.77869V1.44535C13.1832 0.801354 12.6605 0.278687 12.0165 0.278687ZM4.57902 3.34119C4.28035 3.34119 4.00502 3.47769 3.77752 3.70636C3.32136 4.16136 3.32136 4.89169 3.77752 5.34669L5.34436 6.95085C5.80053 7.40586 6.56701 7.40702 7.02201 6.95085C7.47701 6.49469 7.47818 5.7282 7.02201 5.2732L5.41785 3.70636C5.18918 3.47769 4.87769 3.34119 4.57902 3.34119ZM19.4178 3.37736C19.1192 3.37736 18.8439 3.47769 18.6152 3.70636L17.011 5.2732C16.556 5.72937 16.556 6.49469 17.011 6.95085C17.4672 7.40586 18.2325 7.40586 18.6887 6.95085L20.2555 5.34669C20.7117 4.89052 20.7117 4.16136 20.2555 3.70636C20.028 3.47769 19.7165 3.37736 19.4178 3.37736ZM12.0165 6.11203C8.79535 6.11203 6.18319 8.7242 6.18319 11.9454C6.18319 15.1665 8.79535 17.7787 12.0165 17.7787C15.2377 17.7787 17.8499 15.1665 17.8499 11.9454C17.8499 8.7242 15.2377 6.11203 12.0165 6.11203ZM12.0165 8.44536C13.9497 8.44536 15.5165 10.0122 15.5165 11.9454C15.5165 13.8785 13.9497 15.4454 12.0165 15.4454C10.0834 15.4454 8.51652 13.8785 8.51652 11.9454C8.51652 10.0122 10.0834 8.44536 12.0165 8.44536ZM1.51652 10.7787C0.87252 10.7787 0.349854 11.3014 0.349854 11.9454C0.349854 12.5894 0.87252 13.112 1.51652 13.112H3.84985C4.49385 13.112 5.01652 12.5894 5.01652 11.9454C5.01652 11.3014 4.49385 10.7787 3.84985 10.7787H1.51652ZM20.1832 10.7787C19.5392 10.7787 19.0165 11.3014 19.0165 11.9454C19.0165 12.5894 19.5392 13.112 20.1832 13.112H22.5165C23.1605 13.112 23.6832 12.5894 23.6832 11.9454C23.6832 11.3014 23.1605 10.7787 22.5165 10.7787H20.1832ZM6.18319 16.612C5.88452 16.6109 5.57303 16.7124 5.34436 16.9399L3.74019 18.5441C3.28403 18.9991 3.28636 19.7282 3.74019 20.1844C4.19519 20.6417 4.96051 20.6394 5.41785 20.1844L7.02201 18.6175C7.47818 18.1625 7.47585 17.3972 7.02201 16.9399C6.79451 16.7124 6.48185 16.6132 6.18319 16.612ZM17.8499 16.612C17.5512 16.612 17.2385 16.7124 17.011 16.9399C16.556 17.396 16.5549 18.1625 17.011 18.6175L18.6525 20.2217C19.1075 20.6767 19.8378 20.6779 20.2928 20.2217C20.7478 19.7655 20.749 18.9991 20.2928 18.5441L18.6887 16.9399C18.46 16.7124 18.1485 16.612 17.8499 16.612ZM12.0165 18.9454C11.3725 18.9454 10.8499 19.468 10.8499 20.112V22.4454C10.8499 23.0894 11.3725 23.6121 12.0165 23.6121C12.6605 23.6121 13.1832 23.0894 13.1832 22.4454V20.112C13.1832 19.468 12.6605 18.9454 12.0165 18.9454Z"
                          fill="white"
                        />
                      </svg>
                    )}
                  </span>
                </button>
                <button
                  type="button"
                  className=""
                  style={{
                    backgroundColor: "#FF0000",
                    color: "#FFFFFF",
                  }}
                  onClick={authContext.logout}
                >
                  خروج
                </button>
              </>
            )}
          </div>
        </div>
      </>
    );
  }

  return content;
};
export default App;
