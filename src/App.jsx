import Wrapper from "./container/wrapper/Wrapper";
import useDarkMode from "./hooks/Them";
import { AuthContext } from "./context/Auth";
import { useContext } from "react";
import Login from "./components/auth/Login";
const App = () => {
  const [theme, toggleTheme] = useDarkMode();
  const authContext = useContext(AuthContext);
  function getEmailUsername(email) {
    const emailParts = email.split("@");
    if (emailParts.length >= 2) {
      return emailParts[0];
    }
    return email;
  }
  const calculateDivWidth = (name) => {
    const width = name.length * 9;
    return width;
  };
  let content;
  if (!authContext.isAuth) {
    content = (
      <>
        {authContext.user ? (
          <>
            <Login />
          </>
        ) : (
          <>
            <Login />
          </>
        )}
      </>
    );
  } else {
    content = (
      <>
        <div
        className="h-[100vh]"
          style={{
            background: theme === "dark" ? "#F7F7F7" : "#0B0D0C",
            transition: ".2s all",
          }}
        >
          <div className="mx-[156px] flex justify-between">
            {authContext.user && (
              <>
                <div
                  className="h-[58px] rounded-[16px] user text-[24px] text-[#6B9080] relative flex justify-center items-center mt-[72px] mb-[67px]"
                  style={{
                    width: calculateDivWidth(authContext.user.email) + "px",
                  }}
                >
                  <p className="-ml-[35px] -mt-[5px]">
                    {getEmailUsername(authContext.user.email)}
                  </p>
                  <span className="absolute right-[13px] top-[12px]">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M15.9987 2.60419C8.63469 2.60419 2.6907 8.57351 2.66536 15.9375C2.64003 23.2908 8.64136 29.2975 15.9987 29.3122C23.356 29.3268 29.3453 23.2388 29.332 15.9375C29.3187 8.57351 23.3627 2.60419 15.9987 2.60419ZM15.9987 5.27085C21.8893 5.27085 26.6653 10.0468 26.6653 15.9375C26.6653 18.9375 25.416 21.6415 23.4227 23.5802C22.44 21.4562 20.332 19.9375 17.9147 19.9375C17.436 19.9375 14.5614 19.9375 14.0814 19.9375C11.668 19.9375 9.56404 21.4375 8.58137 23.5628C6.58938 21.6242 5.33203 18.9375 5.33203 15.9375C5.33203 10.0468 10.108 5.27085 15.9987 5.27085ZM15.9987 7.93752C13.0534 7.93752 10.6654 10.3255 10.6654 13.2708C10.6654 16.2162 13.0534 18.6042 15.9987 18.6042C18.944 18.6042 21.332 16.2162 21.332 13.2708C21.332 10.3255 18.944 7.93752 15.9987 7.93752ZM15.9987 10.6042C17.472 10.6042 18.6654 11.7975 18.6654 13.2708C18.6654 14.7442 17.472 15.9375 15.9987 15.9375C14.5254 15.9375 13.332 14.7442 13.332 13.2708C13.332 11.7975 14.5254 10.6042 15.9987 10.6042ZM14.0814 22.6042C14.5614 22.6042 17.436 22.6042 17.9147 22.6042C19.4027 22.6042 20.7493 23.6895 21.2213 25.2188C19.3173 26.3428 17.1907 26.6042 15.9987 26.6042C14.7747 26.6042 12.744 26.3295 10.792 25.2535C11.26 23.7108 12.6067 22.6042 14.0814 22.6042Z"
                        fill="#6B9080"
                      />
                    </svg>
                  </span>
                </div>
                <div className="flex mt-[72px] mb-[67px]">
                  <button
                    type="button"
                    className="w-[122px] h-[58px] rounded-[16px] relative text-[24px] ml-[16px]"
                    style={{
                      backgroundColor: theme === "dark" ? "#6B9080" : "#6B9080",
                      color: theme === "dark" ? "#fff" : "#fff",
                    }}
                    onClick={toggleTheme}
                  >
                    {theme === "dark" ? (
                      <p className="-mr-[17px]">تاریک</p>
                    ) : (
                      <p className="-mr-[17px] -mt-[10px]">روشن</p>
                    )}
                    <span className="absolute top-[17px] left-[13px]">
                      {theme === "dark" ? (
                        <svg
                          width="23"
                          height="24"
                          viewBox="0 0 23 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M14.5341 0.904695C13.5157 0.583862 12.6453 1.69685 13.1851 2.61852C14.0379 4.07218 14.4976 5.71253 14.4976 7.35753C14.4976 12.5119 10.3189 16.6908 5.16424 16.6908C4.19369 16.6908 3.21206 16.5333 2.32049 16.2533C1.30211 15.9325 0.395144 17.0455 0.935077 17.9672C3.00883 21.5045 6.79898 23.6908 10.9976 23.6908C17.4408 23.6908 22.6642 18.4677 22.6642 12.0242C22.6642 6.88969 19.3503 2.41903 14.5341 0.904695ZM16.3934 4.40469C18.8015 6.10685 20.3309 8.91269 20.3309 12.0242C20.3309 17.1785 16.1523 21.3575 10.9976 21.3575C8.63146 21.3575 6.46869 20.4475 4.79966 18.9518C4.92414 18.9553 5.04023 19.0242 5.16424 19.0242C11.6076 19.0242 16.8309 13.801 16.8309 7.35753C16.8309 6.35769 16.6536 5.36836 16.3934 4.40469Z"
                            fill="white"
                          />
                        </svg>
                      ) : (
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M12.0165 0.278687C11.3725 0.278687 10.8499 0.801354 10.8499 1.44535V3.77869C10.8499 4.42269 11.3725 4.94536 12.0165 4.94536C12.6605 4.94536 13.1832 4.42269 13.1832 3.77869V1.44535C13.1832 0.801354 12.6605 0.278687 12.0165 0.278687ZM4.57902 3.34119C4.28035 3.34119 4.00502 3.47769 3.77752 3.70636C3.32136 4.16136 3.32136 4.89169 3.77752 5.34669L5.34436 6.95085C5.80053 7.40586 6.56701 7.40702 7.02201 6.95085C7.47701 6.49469 7.47818 5.7282 7.02201 5.2732L5.41785 3.70636C5.18918 3.47769 4.87769 3.34119 4.57902 3.34119ZM19.4178 3.37736C19.1192 3.37736 18.8439 3.47769 18.6152 3.70636L17.011 5.2732C16.556 5.72937 16.556 6.49469 17.011 6.95085C17.4672 7.40586 18.2325 7.40586 18.6887 6.95085L20.2555 5.34669C20.7117 4.89052 20.7117 4.16136 20.2555 3.70636C20.028 3.47769 19.7165 3.37736 19.4178 3.37736ZM12.0165 6.11203C8.79535 6.11203 6.18319 8.7242 6.18319 11.9454C6.18319 15.1665 8.79535 17.7787 12.0165 17.7787C15.2377 17.7787 17.8499 15.1665 17.8499 11.9454C17.8499 8.7242 15.2377 6.11203 12.0165 6.11203ZM12.0165 8.44536C13.9497 8.44536 15.5165 10.0122 15.5165 11.9454C15.5165 13.8785 13.9497 15.4454 12.0165 15.4454C10.0834 15.4454 8.51652 13.8785 8.51652 11.9454C8.51652 10.0122 10.0834 8.44536 12.0165 8.44536ZM1.51652 10.7787C0.87252 10.7787 0.349854 11.3014 0.349854 11.9454C0.349854 12.5894 0.87252 13.112 1.51652 13.112H3.84985C4.49385 13.112 5.01652 12.5894 5.01652 11.9454C5.01652 11.3014 4.49385 10.7787 3.84985 10.7787H1.51652ZM20.1832 10.7787C19.5392 10.7787 19.0165 11.3014 19.0165 11.9454C19.0165 12.5894 19.5392 13.112 20.1832 13.112H22.5165C23.1605 13.112 23.6832 12.5894 23.6832 11.9454C23.6832 11.3014 23.1605 10.7787 22.5165 10.7787H20.1832ZM6.18319 16.612C5.88452 16.6109 5.57303 16.7124 5.34436 16.9399L3.74019 18.5441C3.28403 18.9991 3.28636 19.7282 3.74019 20.1844C4.19519 20.6417 4.96051 20.6394 5.41785 20.1844L7.02201 18.6175C7.47818 18.1625 7.47585 17.3972 7.02201 16.9399C6.79451 16.7124 6.48185 16.6132 6.18319 16.612ZM17.8499 16.612C17.5512 16.612 17.2385 16.7124 17.011 16.9399C16.556 17.396 16.5549 18.1625 17.011 18.6175L18.6525 20.2217C19.1075 20.6767 19.8378 20.6779 20.2928 20.2217C20.7478 19.7655 20.749 18.9991 20.2928 18.5441L18.6887 16.9399C18.46 16.7124 18.1485 16.612 17.8499 16.612ZM12.0165 18.9454C11.3725 18.9454 10.8499 19.468 10.8499 20.112V22.4454C10.8499 23.0894 11.3725 23.6121 12.0165 23.6121C12.6605 23.6121 13.1832 23.0894 13.1832 22.4454V20.112C13.1832 19.468 12.6605 18.9454 12.0165 18.9454Z"
                            fill="white"
                          />
                        </svg>
                      )}
                    </span>
                  </button>
                  <button
                    type="button"
                    className="w-[122px] h-[58px] rounded-[16px] relative text-[24px] font-regular bg-[#E84C29]"
                    onClick={authContext.logout}
                  >
                    <p className="-mr-[28px] text-white">خروج</p>
                    <span className="absolute top-[17px] left-[16px]">
                      <svg
                        width="28"
                        height="28"
                        viewBox="0 0 28 28"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M24.5165 8.15587C24.5165 5.5787 22.427 3.4892 19.8499 3.4892H15.1832C12.606 3.4892 10.5165 5.5787 10.5165 8.15587C10.5165 8.79987 11.0392 9.32253 11.6832 9.32253C12.3272 9.32253 12.8499 8.79987 12.8499 8.15587C12.8499 6.8667 13.894 5.82253 15.1832 5.82253H19.8499C21.139 5.82253 22.1832 6.8667 22.1832 8.15587V19.8225C22.1832 21.1117 21.139 22.1559 19.8499 22.1559H15.1832C13.894 22.1559 12.8499 21.1117 12.8499 19.8225C12.8499 19.1785 12.3272 18.6559 11.6832 18.6559C11.0392 18.6559 10.5165 19.1785 10.5165 19.8225C10.5165 22.3997 12.606 24.4892 15.1832 24.4892H19.8499C22.427 24.4892 24.5165 22.3997 24.5165 19.8225V8.15587ZM16.3499 13.9892C16.3499 13.3452 15.8272 12.8225 15.1832 12.8225H7.01652V9.32253L2.34985 13.9892L7.01652 18.6559V15.1559H15.1832C15.8272 15.1559 16.3499 14.6332 16.3499 13.9892Z"
                          fill="white"
                        />
                      </svg>
                    </span>
                  </button>
                </div>
              </>
            )}
          </div>
          <div className="mr-[156px]">
            <div className="">
              <Wrapper theme={theme} />
            </div>
          </div>
        </div>
      </>
    );
  }

  return content;
};
export default App;
